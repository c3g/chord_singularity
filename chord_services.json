[
  {
    "id": "service_registry",
    "repository": "https://github.com/c3g/chord_service_registry",
    "data_service": false,
    "wsgi": true,
    "python_module": "chord_service_registry.app",
    "python_callable": "application",
    "python_environment": {
      "CHORD_SERVICES": "/chord/chord_services.json",
      "DATABASE": "{SERVICE_DATA}/service_registry.db"
    }
  },
  {
    "id": "drop_box",
    "repository": "https://github.com/c3g/chord_drop_box_service",
    "data_service": false,
    "wsgi": true,
    "python_module": "chord_drop_box_service.app",
    "python_callable": "application",
    "python_environment": {
      "SERVICE_DATA": "{SERVICE_DATA}"
    }
  },
  {
    "id": "wes",
    "repository": "https://github.com/c3g/chord_wes",
    "data_service": false,
    "apt_dependencies": ["openjdk-11-jre-headless"],
    "pre_install_commands": [
      "curl -Lo /chord/womtool.jar https://github.com/broadinstitute/cromwell/releases/download/45.1/womtool-45.1.jar"
    ],
    "pre_start_commands": [
      "nohup celery -A chord_wes.app worker &> {SERVICE_LOGS}/celery.log &"
    ],
    "wsgi": true,
    "python_module": "chord_wes.app",
    "python_callable": "application",
    "python_environment": {
      "CHORD_SERVICES": "/chord/chord_services.json",
      "CELERY_RESULT_BACKEND":  "redis+socket://{REDIS_SOCKET}",
      "CELERY_BROKER_URL": "redis+socket://{REDIS_SOCKET}",
      "DATABASE":  "{SERVICE_DATA}/wes.db",
      "SERVICE_BASE_URL": "{SERVICE_BASE_URL}",
      "SERVICE_TEMP":  "{SERVICE_TEMP}",
      "WOM_TOOL_LOCATION": "/chord/womtool.jar"
    }
  },
  {
    "id": "federation",
    "repository": "https://github.com/c3g/chord_federation",
    "data_service": false,
    "wsgi": false,
    "python_runnable": "chord_federation",
    "python_environment": {
      "SOCKET": "{SERVICE_SOCKET}",
      "BASE_URL": "{SERVICE_BASE_URL}",
      "DATABASE": "{SERVICE_DATA}/federation.db"
    }
  },
  {
    "id": "metadata",
    "repository": "https://github.com/c3g/chord_metadata_service",
    "data_service": false,
    "pre_start_commands": [
      "django-admin migrate"
    ],
    "wsgi": true,
    "python_module": "chord_metadata_service.metadata.wsgi",
    "python_callable": "application",
    "python_environment": {
      "CHORD_DEBUG": "{CHORD_DEBUG}",
      "DJANGO_SETTINGS_MODULE": "chord_metadata_service.metadata.settings",
      "POSTGRES_DATABASE": "{POSTGRES_DATABASE}",
      "POSTGRES_USER": "{POSTGRES_USER}",
      "POSTGRES_PASSWORD": "{POSTGRES_PASSWORD}",
      "SERVICE_SECRET_KEY": "{SERVICE_SECRET_KEY}"
    }
  },
  {
    "id": "example",
    "repository": "https://github.com/c3g/chord_example_service",
    "data_service": true,
    "wsgi": true,
    "python_module": "chord_example_service.app",
    "python_callable": "application",
    "python_environment": {
      "DATABASE": "{SERVICE_DATA}/example_service.db"
    }
  },
  {
    "id": "variant",
    "repository": "https://github.com/c3g/chord_variant_service",
    "data_service": true,
    "apt_dependencies": ["samtools"],
    "wsgi": true,
    "python_module": "chord_variant_service.app",
    "python_callable": "application",
    "python_environment": {
      "DATA": "{SERVICE_DATA}/"
    }
  }
]
