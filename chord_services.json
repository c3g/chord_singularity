[
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "service-registry"
    },
    "repository": "https://github.com/c3g/chord_service_registry",
    "data_service": false,
    "wsgi": true,
    "python_module": "chord_service_registry.app",
    "python_callable": "application",
    "python_environment": {
      "BASE_FORMAT": "/api/{{artifact}}",
      "CHORD_SERVICES": "/chord/chord_services.json"
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "drop-box"
    },
    "repository": "https://github.com/c3g/chord_drop_box_service",
    "data_service": false,
    "wsgi": true,
    "python_module": "chord_drop_box_service.app",
    "python_callable": "application"
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "wes"
    },
    "repository": "https://github.com/c3g/chord_wes",
    "data_service": false,
    "apt_dependencies": ["openjdk-11-jre-headless"],
    "pre_install_commands": [
      "curl -Lso /chord/womtool.jar https://github.com/broadinstitute/cromwell/releases/download/45.1/womtool-45.1.jar"
    ],
    "pre_start_commands": [
      "nohup celery -A chord_wes.app worker --pidfile {SERVICE_TEMP}/celery.pid &> {SERVICE_LOGS}/celery.log &"
    ],
    "post_stop_commands": [
      "pkill -9 -F {SERVICE_TEMP}/celery.pid"
    ],
    "wsgi": true,
    "python_module": "chord_wes.app",
    "python_callable": "application",
    "python_environment": {
      "CHORD_SERVICES": "/chord/chord_services.json",
      "CELERY_RESULT_BACKEND":  "redis+socket://{REDIS_SOCKET}",
      "CELERY_BROKER_URL": "redis+socket://{REDIS_SOCKET}",
      "DATABASE":  "{SERVICE_DATA}/wes.db",
      "WOM_TOOL_LOCATION": "/chord/womtool.jar"
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "federation"
    },
    "repository": "https://github.com/c3g/chord_federation",
    "data_service": false,
    "wsgi": false,
    "python_runnable": "chord_federation",
    "python_environment": {
      "DATABASE": "{SERVICE_DATA}/federation.db"
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "metadata"
    },
    "repository": "https://github.com/c3g/chord_metadata_service",
    "data_service": true,
    "manageable_tables": false,
    "pre_start_commands": [
      "django-admin migrate"
    ],
    "wsgi": true,
    "python_module": "chord_metadata_service.metadata.wsgi",
    "python_callable": "application",
    "python_environment": {
      "DJANGO_SETTINGS_MODULE": "chord_metadata_service.metadata.settings"
    }
  },
  {
    "type":  {
      "organization": "ca.c3g.chord",
      "artifact": "example"
    },
    "repository": "https://github.com/c3g/chord_example_service",
    "data_service": true,
    "manageable_tables": true,
    "wsgi": true,
    "python_module": "chord_example_service.app",
    "python_callable": "application",
    "python_environment": {
      "DATABASE": "{SERVICE_DATA}/example_service.db"
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "variant"
    },
    "repository": "https://github.com/c3g/chord_variant_service",
    "data_service": true,
    "manageable_tables": true,
    "apt_dependencies": ["samtools"],
    "wsgi": true,
    "python_module": "chord_variant_service.app",
    "python_callable": "application",
    "python_environment": {
      "DATA": "{SERVICE_DATA}/"
    }
  }
]
