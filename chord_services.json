[
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "service-registry",
      "language": "python"
    },
    "repository": "https://github.com/c3g/chord_service_registry@v0.1.3",
    "data_service": false,
    "wsgi": true,
    "python_module": "chord_service_registry.app",
    "python_callable": "application",
    "run_environment": {
      "CHORD_SERVICES": "/chord/chord_services.json",
      "URL_PATH_FORMAT": "api/{{artifact}}"
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "drop-box",
      "language": "python"
    },
    "repository": "https://github.com/c3g/chord_drop_box_service@v0.2.0",
    "data_service": false,
    "wsgi": true,
    "python_module": "chord_drop_box_service.app",
    "python_callable": "application",
    "run_environment": {
      "MINIO_URL": "",
      "MINIO_USERNAME": "",
      "MINIO_PASSWORD": "",
      "MINIO_BUCKET": ""
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "wes",
      "language": "python"
    },
    "repository": "https://github.com/c3g/chord_wes",
    "data_service": false,
    "apt_dependencies": ["openjdk-11-jre-headless"],
    "pre_install_commands": [
      "curl -Lso /chord/womtool.jar https://github.com/broadinstitute/cromwell/releases/download/49/womtool-49.jar"
    ],
    "pre_start_commands": [
      "nohup celery -A chord_wes.app worker &> {SERVICE_LOGS}/celery.log &"
    ],
    "post_stop_commands": [
      "pkill -9 -f 'chord_wes.app worker$'"
    ],
    "wsgi": true,
    "python_module": "chord_wes.app",
    "python_callable": "application",
    "run_environment": {
      "CHORD_SERVICES": "/chord/chord_services.json",
      "CELERY_RESULT_BACKEND":  "redis+socket://{REDIS_SOCKET}",
      "CELERY_BROKER_URL": "redis+socket://{REDIS_SOCKET}",
      "DATABASE":  "{SERVICE_DATA}/wes.db",
      "NGINX_INTERNAL_SOCKET": "/chord/tmp/nginx_internal.sock",
      "WOM_TOOL_LOCATION": "/chord/womtool.jar",
      "WRITE_OUTPUT_TO_DRS": "0"
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "federation",
      "language": "python"
    },
    "repository": "https://github.com/c3g/chord_federation_service@v0.3.0",
    "data_service": false,
    "wsgi": false,
    "service_runnable": "chord_federation_service",
    "run_environment": {
      "DATABASE": "{SERVICE_DATA}/federation.db",
      "SOCKET_INTERNAL": "/chord/tmp/nginx_internal.sock"
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "notification",
      "language": "python"
    },
    "repository": "https://github.com/c3g/chord_notification_service@v0.2.0",
    "data_service": false,
    "pre_start_commands": [
      "flask db upgrade"
    ],
    "wsgi": true,
    "python_module": "chord_notification_service.app",
    "python_callable": "application",
    "run_environment": {
      "DATABASE": "{SERVICE_DATA}",
      "FLASK_APP": "chord_notification_service.app"
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "event-relay",
      "language": "javascript"
    },
    "repository": "https://github.com/c3g/chord_event_relay#v0.2.0",
    "data_service": false,
    "wsgi": false,
    "service_runnable": "chord-event-relay",
    "run_environment": {
      "SOCKET_IO_PATH": "/private/socket.io"
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "metadata",
      "language": "python"
    },
    "repository": "https://github.com/c3g/chord_metadata_service@v0.5.2",
    "data_service": true,
    "manageable_tables": false,
    "pre_start_commands": [
      "django-admin migrate"
    ],
    "wsgi": true,
    "python_module": "chord_metadata_service.metadata.wsgi",
    "python_callable": "application",
    "run_environment": {
      "DJANGO_SETTINGS_MODULE": "chord_metadata_service.metadata.settings"
    }
  },
  {
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "variant",
      "language": "python"
    },
    "repository": "https://github.com/c3g/chord_variant_service",
    "data_service": true,
    "manageable_tables": true,
    "apt_dependencies": ["samtools"],
    "wsgi": true,
    "python_module": "chord_variant_service.app",
    "python_callable": "application",
    "run_environment": {
      "DATA": "{SERVICE_DATA}/",
      "TABLE_MANAGER": "vcf"
    }
  },
  {
    "disabled": true,
    "type": {
      "organization": "ca.c3g.chord",
      "artifact": "drs",
      "language": "python"
    },
    "repository": "https://github.com/c3g/chord_drs",
    "data_service": false,
    "pre_start_commands": [
      "flask db upgrade"
    ],
    "wsgi": true,
    "python_module": "chord_drs.app",
    "python_callable": "application",
    "run_environment": {
      "DATABASE": "{SERVICE_DATA}",
      "FLASK_APP": "chord_drs.app"
    }
  }
]
